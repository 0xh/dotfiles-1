#=============================================================================
#       Author: Wenxuan Zhang
#        Email: wenxuangm@gmail.com
#     HomePage: wenxuan.info
#=============================================================================

if [[ ! $+commands[tac] ]]; then
    alias tac='tail -r'
fi

alias sudo='sudo ' #可以使sudo支持alias

alias vimrc='vim ~/.vimrc'
alias shutdown='shutdown -h now'
alias xxnet='~/tools/xx-net/start'
alias xx='proxychains4'
alias hhkb='setxkbmap -option "ctrl:swapcaps"'
alias disable_touch_pad='sudo modprobe -r psmouse'   # 禁用触控板
alias enable_touch_pad='sudo modprobe psmouse'       # 启用触控板
alias mkycm='cp ~/dotfiles/cpp/ycm_extra_conf.py .ycm_extra_conf.py'
if [[ $+commands[nvim] ]]; then
    alias vim=`which nvim`
fi
alias v=vim
alias vi=vim
alias vw=gvim
alias e='emacs -nw'
alias ew=emacs

# copy alias
# eg: cat foo.csv | pbcopy
alias pbcopy='xclip -selection clipboard'
alias pbpaste='xclip -selection clipboard -o'


alias mux=tmuxinator
alias daily='tmuxinator daily'

alias evalclip='eval `xclip -o`'
alias weather='curl wttr.in'

alias fg1='fg %1'
alias fg2='fg %2'
alias fg3='fg %3'
alias fg4='fg %4'
alias fg5='fg %5'

# Plugin manager
source ~/.zplug/init.zsh || curl https://raw.githubusercontent.com/zplug/installer/master/installer.zsh | zsh && source ~/.zplug/init.zsh
zplug "lib/completion", from:oh-my-zsh
zplug "lib/directories", from:oh-my-zsh
zplug "lib/clipboard", from:oh-my-zsh, as:command
zplug "lib/grep", from:oh-my-zsh
zplug "lib/theme-and-appearance", from:oh-my-zsh

# Git alias. See: https://github.com/robbyrussell/oh-my-zsh/wiki/Plugin:git
zplug "plugins/git", from:oh-my-zsh
# Git completions. On OS X with Homebrew, you need to install git with brew install git --without-completions. Otherwise, git's _git will take precedence, and you won't see the completions for git-extras commands.
zplug "plugins/git-extras", from:oh-my-zsh
zplug "plugins/github", from:oh-my-zsh
zplug "plugins/gitignore", from:oh-my-zsh
zplug "plugins/osx", from:oh-my-zsh, if:"[[ $OSTYPE = *darwin* ]]"
zplug "plugins/ubuntu", from:oh-my-zsh, if:"[[ $OSTYPE = *linux* ]]"
# Plug for highlighting file content
zplug "plugins/cp", from:oh-my-zsh
zplug "plugins/wd", from:oh-my-zsh
zplug "plugins/mvn", from:oh-my-zsh
zplug "lukechilds/zsh-nvm"
zplug "plugins/pip", from:oh-my-zsh
zplug "plugins/vi-mode", from:oh-my-zsh
zplug "plugins/sudo", from:oh-my-zsh
zplug "plugins/common-aliases", from:oh-my-zsh
zplug "plugins/web-search", from:oh-my-zsh
zplug "plugins/docker", from:oh-my-zsh
zplug "plugins/z", from:oh-my-zsh
zplug "plugins/tmux", from:oh-my-zsh
zplug "plugins/tmuxinator", from:oh-my-zsh

zplug "zsh-users/zsh-syntax-highlighting", defer:2
zplug "zsh-users/zsh-completions"
zplug "zsh-users/zsh-autosuggestions"

zplug "denysdovhan/spaceship-zsh-theme", as:theme
SPACESHIP_VI_MODE_SHOW=false
zplug "morhetz/gruvbox", use:"gruvbox_256palette.sh", if:"[[ $OSTYPE = *linux* ]]"
zplug "morhetz/gruvbox", use:"gruvbox_256palette_osx.sh", if:"[[ $OSTYPE = *darwin* ]]"

# fzf is a general-purpose command-line fuzzy finder.
# @see: https://github.com/junegunn/fzf
zplug "junegunn/fzf-bin", \
    as:command, \
    from:gh-r, \
    rename-to:"fzf", \
    frozen:1

# jq is a lightweight and flexible command-line JSON processor.
zplug "stedolan/jq", \
    as:command, \
    from:gh-r, \
    rename-to:jq

# like grep, ack, ag
zplug "monochromegane/the_platinum_searcher", \
    as:command, \
    from:gh-r, \
    rename-to:"pt", \
    frozen:1

# Simplistic interactive filtering tool
zplug "peco/peco", \
    as:command, \
    from:gh-r, \
    frozen:1

# A next-generation cd command with an interactive filter
zplug "jhawthorn/fzy", \
    as:command, \
    hook-build:"make && sudo make install"

# ghr creates GitHub Release and uploads artifacts in parallel.
zplug "tcnksm/ghr", \
    as:command, \
    from:gh-r

# Short, simple, direct scripts for creating ASCII graphical histograms in the terminal.
zplug "philovivero/distribution", \
    as:command, \
    use:distribution, \
    if:'(( $+commands[perl] ))'

# httpstat visualizes curl(1) statistics in a way of beauty and clarity.
zplug "reorx/httpstat", \
    as:command, \
    use:'(httpstat).py', \
    rename-to:'$1', \
    if:'(( $+commands[python] ))'

# wrk - a HTTP benchmarking tool
# eg: wrk -t12 -c400 -d30s http://127.0.0.1:8080/index.html
zplug "wg/wrk", \
    as:command, \
    hook-build:"make -j8"

# Install plugins if there are plugins that have not been installed
if ! zplug check --verbose; then
    printf "Install? [y/N]: "
    if read -q; then
        echo; zplug install
    fi
fi

zplug load
#zplug load --verbose

[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh
