" vim: filetype=vim

" Lock up history commands quickly
cnoremap <C-p> <Up>
cnoremap <C-n> <Down>

" Using <SPACE> to fold or unfold
nnoremap <leader><SPACE> @=((foldclosed(line('.')) < 0) ? 'zc' : 'zo')<CR>

" Disable highlight when <leader><cr> is pressed
nnoremap <silent> <leader><cr> :noh<cr>

" These create newlines like o and O but stay in normal mode
nnoremap <silent> zj o<Esc>k
nnoremap <silent> zk O<Esc>j
nnoremap <silent> zl i <Esc>l
"inoremap <silent> <leader>i <Home>
"inoremap <silent> <leader>a <End>
inoremap <silent> <leader>, <End>,
inoremap <silent> <leader>; <End>;<Esc>
inoremap <silent> <leader>{ <End> {<CR>}<C-o>O
inoremap <silent> <leader>. ->
"inoremap <silent> <leader>o <C-o>o
"inoremap <silent> <leader>O <C-o>O

" Make j/k/0/$ work as expected on the wrap lines
noremap  <buffer> <silent> k gk
noremap  <buffer> <silent> j gj
noremap  <buffer> <silent> gk k
noremap  <buffer> <silent> gj j
noremap  <buffer> <silent> 0 g0
noremap  <buffer> <silent> $ g$

" Close window
"noremap <leader>q :q<cr>
noremap <leader>Q :q!<cr>
noremap <C-c> :q<cr>
" Save write
"noremap <leader>w :w<cr>
noremap <leader>W :w!<cr>
noremap <C-s> :w<cr>
" Save and quit
"noremap <leader>x :x<cr>
noremap <C-x> :x<cr>
noremap <leader>X :x!<cr>

" Save and suspend
noremap <leader>bg :w<cr><C-z>

" Remove the Windows ^M - when the encodings gets messed up
noremap <leader>M mmHmt:%s/<C-v><CR>//ge<CR>'tzt'm

" Yank & paste
noremap  <c-y> "+yy
vnoremap <c-y> "+y
inoremap <c-v> <c-r>+

" Select pasted text
noremap gp `[v`]

noremap H 0
noremap L $

" Emacs style key mapping
inoremap <C-a> <Home>
inoremap <C-e> <End>
inoremap <leader>a <End>
inoremap <leader>e <End>
inoremap <C-h> <BS>
inoremap <C-d> <Del>
inoremap <C-f> <Right>
inoremap <C-b> <Left>
"inoremap <C-n> <Down>
"inoremap <C-p> <Up>
"inoremap <C-m> <CR>
" In insert mode, pressing Ctrl-O switches to normal mode for one command, then switches back to insert mode when the command is finished.
inoremap <C-k> <C-o>D
inoremap <C-u> <Esc>v0c
inoremap <C-y> <C-o>"+P

" Quickly move in normal mode
noremap <c-j> <c-y>
noremap <c-k> <c-e>
noremap <c-e> A
noremap <c-a> I

" Paste multiple times
xnoremap p pgvy

" Move between windows quickly
noremap <A-h> <C-w>h
noremap <A-j> <C-w>j
noremap <A-k> <C-w>k
noremap <A-l> <C-w>l

" Toggle line wrap
noremap <A-w> :set wrap!<CR>

map <C-Up> :resize +1<cr>
map <C-Down> :resize -1<cr>
map <C-Right> :vertical resize +1<cr>
map <C-Left> :vertical resize -1<cr>

" Useful mappings for managing tabs
map <leader>tc :tabnew<SPACE>
map <leader>tq :tabclose<CR>
map <leader>tn :tabnext<CR>
map <leader>tp :tabNext<CR>

" pressing <leader>ss will toggle spell checking
noremap <leader>ss :setlocal spell!<cr>
noremap <leader>sn ]s
noremap <leader>sp [s
noremap <leader>sa zg
noremap <leader>s? z=

nnoremap q: <Nop>
nnoremap q/ <Nop>
nnoremap q? <Nop>
nnoremap <Up> <Nop>
nnoremap <Down> <Nop>
nnoremap <Left> <Nop>
nnoremap <Right> <Nop>
nnoremap ZZ <Nop>
nnoremap ZQ <Nop>

" Save with root
cmap W!! w !sudo tee % >/dev/null<cr>

" Smart space mapping
" Notice: when starting other <Space> mappings in noremap, disappeared [Space]
nmap     <Space> [Space]
xmap     <Space> [Space]
nnoremap [Space] <Nop>
xnoremap [Space] <Nop>
" key map ^,$ to <Space>h,l. Because ^ and $ is difficult to type and damage little finger!!!
noremap [Space]h ^
noremap [Space]l $

noremap ï¼š :
